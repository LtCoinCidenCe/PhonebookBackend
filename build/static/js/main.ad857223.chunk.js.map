{"version":3,"sources":["components/display.js","components/filter.js","components/inputForm.js","components/notification.js","service/persons.js","App.js","index.js"],"names":["Display","props","peopleList","removePerson","map","psn","style","marginRight","name","number","onClick","id","Filter","filterWord","filterWordChange","value","onChange","InputForm","formSubmit","newName","nameChange","newNumber","numberChange","onSubmit","type","Notification","message","startsWith","className","slice","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","put","remove","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterWord","msg","setMsg","useEffect","initialPersons","filtered","filter","toLowerCase","includes","event","target","preventDefault","index","findIndex","newPerson","returnedPerson","concat","setTimeout","catch","error","window","confirm","targetPerson","console","log","find","idx","indexOf","info","newList","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad857223.chunk.js","sourcesContent":["const Display = (props) =>\r\n{\r\n  const { peopleList, removePerson } = props;\r\n  return <div>{peopleList.map(\r\n    psn => <div key={psn.name}>\r\n      <span style={{ marginRight: \"1em\" }}>{psn.name}</span><span style={{ marginRight: \"1em\" }}>{psn.number}</span>\r\n      <button onClick={() => { removePerson(psn.id) }}>delete</button>\r\n    </div>)}\r\n  </div>\r\n};\r\n\r\nexport default Display;\r\n","const Filter = ({ filterWord, filterWordChange }) =>\r\n{\r\n  return <div><span>filter shown with </span><input value={filterWord} onChange={filterWordChange} /></div>\r\n};\r\n\r\nexport default Filter;\r\n","const InputForm = (props) =>\r\n{\r\n  const { formSubmit, newName, nameChange, newNumber, numberChange } = props;\r\n  return <form onSubmit={formSubmit}>\r\n    <div>name: <input value={newName} onChange={nameChange} /></div>\r\n    <div>number: <input value={newNumber} onChange={numberChange} /></div>\r\n    <div><button type=\"submit\">add</button></div>\r\n  </form>\r\n};\r\n\r\nexport default InputForm;\r\n","import './notification.css'\r\n\r\nconst Notification = ({ message }) =>\r\n{\r\n  if (message !== null)\r\n  {\r\n    if (message.startsWith('e:'))\r\n    {\r\n      // error\r\n      return <div className='error info'>{message.slice(2)}</div>\r\n    }\r\n    if (message.startsWith('s:'))\r\n    {\r\n      // success\r\n      return <div className='success info'>{message.slice(2)}</div>\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default Notification;\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () =>\r\n{\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject =>\r\n{\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) =>\r\n{\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) =>\r\n{\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst personService = { getAll, create, update, remove }; // give it a name\r\n\r\nexport default personService;\r\n","import React, { useState, useEffect } from 'react'\nimport Display from './components/display';\nimport Filter from './components/filter'\nimport InputForm from './components/inputForm';\nimport Notification from './components/notification';\nimport personService from './service/persons';\n\nconst App = () =>\n{\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filterWord, setFilterWord] = useState('');\n  const [msg, setMsg] = useState(null);\n\n  useEffect(() =>\n  {\n    personService.getAll().then(initialPersons => { setPersons(initialPersons) });\n  }, []);\n\n  const filterWordChange = (event) => setFilterWord(event.target.value);\n  const nameChange = (event) => setNewName(event.target.value);\n  const numberChange = (event) => setNewNumber(event.target.value);\n  const insensitiveInclude = (psn) => psn.name.toLowerCase().includes(filterWord.toLowerCase());\n\n  const filtered = filterWord ? persons.filter(insensitiveInclude) : persons;\n\n  const formSubmit = (event) =>\n  {\n    event.preventDefault();\n    const index = persons.findIndex(psn => psn.name === newName);\n    if (index === -1)\n    {\n      // create a new number\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      };\n\n      // the server should be able to handle identical names for post, not here\n      // let me fix that when I have learned about server\n      personService.create(newPerson).then(returnedPerson =>\n      {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n        setMsg(`s:Added ${returnedPerson.name}`);\n        setTimeout(() => { setMsg(null) }, 5000);\n      })\n        .catch(error => { setMsg(`e:${error.response.data.error}`) }); // try not to reach this line\n    }\n    else\n    {\n      // update the number\n      // alert(`${newName} is already added to the phonebook.`);\n      if (window.confirm(`${newName} is already added to the phonebook. Replace the old number with the new one?`))\n      {\n        const targetPerson = {\n          ...persons[index],\n          number: newNumber\n        };\n        personService.update(targetPerson.id, targetPerson).then(returnedPerson =>\n        {\n          setPersons(persons.map(psn => psn.id !== targetPerson.id ? psn : returnedPerson));\n          setNewName('');\n          setNewNumber('');\n          setMsg(`s:Number of ${returnedPerson.name} changed`);\n          setTimeout(() => { setMsg(null) }, 5000);\n        })\n          .catch(error =>\n          {\n            console.log(error.response)\n            // problem with the update validation\n            setMsg(`e:${error.response.data.error}`);\n          })\n      }\n    }\n  }\n\n  /** id is the id in the database, not index in persons array */\n  const removePerson = (id) =>\n  {\n    const targetPerson = persons.find(psn => psn.id === id);\n    const idx = persons.indexOf(targetPerson); // it is not guaranteed that the index of target in array is the same as id in the object \n    // (nor even close relation)\n    if (window.confirm(`Delete ${targetPerson.name}`))\n    {\n      personService.remove(id).then(info =>\n      {\n        console.log(info);\n        const newList = persons.slice(0, idx).concat(persons.slice(idx + 1));\n        setPersons(newList);\n        setMsg(`s:Deleted ${targetPerson.name}`);\n        setTimeout(() => { setMsg(null) }, 5000);\n      })\n        .catch(error => { alert(error) }); // try not to reach this line;\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={msg} />\n      <Filter filterWord={filterWord} filterWordChange={filterWordChange} />\n      <h2>add a new</h2>\n      <InputForm formSubmit={formSubmit} newName={newName} nameChange={nameChange} newNumber={newNumber} numberChange={numberChange} />\n      <h2>Numbers</h2>\n      <Display peopleList={filtered} removePerson={removePerson} />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}